// The master template for the nodes for a particular column.

// ToDo: Move the node creation routines to the database driver, so that nodes can generate their own database code.

var privateName string

privateName = strings.ToLower(t.GoName[:1]) + t.GoName[1:]
{{
package node

// Code generated by goradd. DO NOT EDIT.

import (
	"github.com/goradd/goradd/pkg/orm/query"
)
}}

{{
type {{privateName}}Node struct {
	query.ReferenceNodeI
}

func {{= t.GoName }}() *{{privateName}}Node {
	n := {{privateName}}Node {
		query.NewTableNode("{{= t.DbKey }}", "{{= t.DbName }}",  "{{= t.GoName }}"),
	}
	query.SetParentNode(&n, nil)
	return &n
}

}}

{{
func (n *{{privateName}}Node) SelectNodes_() (nodes []*query.ColumnNode) {
}}

for _,col := range t.Columns {

{{
	nodes = append(nodes, n.{{col.GoName}}())
}}

}

{{
	return nodes
}
}}

{{
func (n *{{privateName}}Node) PrimaryKeyNode_() (*query.ColumnNode) {
}}

for _,col := range t.Columns {
	if col.IsPk {
{{
	return n.{{col.GoName}}()
}}
		break
	}
}

{{
}
}}

{{
func (n *{{privateName}}Node) EmbeddedNode_() query.NodeI {
	return n.ReferenceNodeI
}
}}

{{
func (n *{{privateName}}Node) Copy_() query.NodeI {
	return &{{privateName}}Node{query.CopyNode(n.ReferenceNodeI)}
}
}}

{{: column.tmpl }}
